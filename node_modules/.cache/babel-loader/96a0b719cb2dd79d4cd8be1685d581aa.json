{"ast":null,"code":"import _objectSpread from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/regenerator/index.js\";// Import the functions you need from the SDKs you need\nimport{initializeApp}from\"firebase/app\";import{getAuth,signInWithPopup,GoogleAuthProvider,createUserWithEmailAndPassword,signInWithEmailAndPassword}from'firebase/auth';import{getFirestore,doc,getDoc,setDoc}from'firebase/firestore';// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\nvar firebaseConfig={apiKey:\"AIzaSyA-8wsVn7giqh-Vo6MlMYTIjt1LQIoVsSc\",authDomain:\"crwn-clothing-db-b360d.firebaseapp.com\",projectId:\"crwn-clothing-db-b360d\",storageBucket:\"crwn-clothing-db-b360d.appspot.com\",messagingSenderId:\"894166010737\",appId:\"1:894166010737:web:40acb738c2184e614ac4d0\"};// Initialize Firebase\nvar firebaseApp=initializeApp(firebaseConfig);var provider=new GoogleAuthProvider();provider.setCustomParameters({prompt:\"select_account\"});export var auth=getAuth();export var signInWithGooglePopup=function signInWithGooglePopup(){return signInWithPopup(auth,provider);};export var db=getFirestore();export var createUserDocumentFromAuth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var additionalInformation,userDocRef,userSnapshot,displayName,email,createdAt,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:additionalInformation=_args.length>1&&_args[1]!==undefined?_args[1]:{};if(userAuth){_context.next=3;break;}return _context.abrupt(\"return\");case 3:userDocRef=doc(db,'users',userAuth.uid);_context.next=6;return getDoc(userDocRef);case 6:userSnapshot=_context.sent;if(userSnapshot.exists()){_context.next=18;break;}displayName=userAuth.displayName,email=userAuth.email;createdAt=new Date();_context.prev=10;_context.next=13;return setDoc(userDocRef,_objectSpread({displayName:displayName,email:email,createdAt:createdAt},additionalInformation));case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](10);console.log('error creating the user '+_context.t0.message);case 18:return _context.abrupt(\"return\",userDocRef);case 19:case\"end\":return _context.stop();}}},_callee,null,[[10,15]]);}));return function createUserDocumentFromAuth(_x){return _ref.apply(this,arguments);};}();export var createAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!email||!password)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return createUserWithEmailAndPassword(auth,email,password);case 4:return _context2.abrupt(\"return\",_context2.sent);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function createAuthUserWithEmailAndPassword(_x2,_x3){return _ref2.apply(this,arguments);};}();export var SignInAuthWithEmailAndPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email,password){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(!email||!password)){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:_context3.next=4;return signInWithEmailAndPassword(auth,email,password);case 4:return _context3.abrupt(\"return\",_context3.sent);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function SignInAuthWithEmailAndPassword(_x4,_x5){return _ref3.apply(this,arguments);};}();","map":{"version":3,"names":["initializeApp","getAuth","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","getFirestore","doc","getDoc","setDoc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseApp","provider","setCustomParameters","prompt","auth","signInWithGooglePopup","db","createUserDocumentFromAuth","userAuth","additionalInformation","userDocRef","uid","userSnapshot","exists","displayName","email","createdAt","Date","console","log","message","createAuthUserWithEmailAndPassword","password","SignInAuthWithEmailAndPassword"],"sources":["/Users/matasdamb/Documents/reacting/crwn-clothing/src/utils/firebase/firebase.utils.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { \n    getAuth, \n    signInWithPopup, \n    GoogleAuthProvider, \n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n} from 'firebase/auth';\nimport { getFirestore, doc, getDoc, setDoc } from 'firebase/firestore'\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA-8wsVn7giqh-Vo6MlMYTIjt1LQIoVsSc\",\n  authDomain: \"crwn-clothing-db-b360d.firebaseapp.com\",\n  projectId: \"crwn-clothing-db-b360d\",\n  storageBucket: \"crwn-clothing-db-b360d.appspot.com\",\n  messagingSenderId: \"894166010737\",\n  appId: \"1:894166010737:web:40acb738c2184e614ac4d0\"\n};\n\n// Initialize Firebase\nconst firebaseApp = initializeApp(firebaseConfig);\n\nconst provider = new GoogleAuthProvider();\n\nprovider.setCustomParameters({\n    prompt: \"select_account\"\n});\n\nexport const auth = getAuth();\nexport const signInWithGooglePopup = () => signInWithPopup(auth, provider);\n\nexport const db = getFirestore();\n\nexport const createUserDocumentFromAuth = async (userAuth, additionalInformation = {}) => {\n    if(!userAuth) return;\n\n    const userDocRef = doc(db, 'users', userAuth.uid);\n    const userSnapshot = await getDoc(userDocRef); \n\n\n    if(!userSnapshot.exists()){\n        const { displayName, email } = userAuth;\n        const createdAt = new Date();\n\n        try{\n            await setDoc(userDocRef, {\n                displayName,\n                email, \n                createdAt,\n                ...additionalInformation,\n            })\n        }catch (error){\n            console.log('error creating the user ' + error.message);\n        }\n    }\n\n    return userDocRef;\n}\n\nexport const createAuthUserWithEmailAndPassword = async (email, password) => {\n    if(!email || !password) return;\n    return await createUserWithEmailAndPassword(auth, email, password);\n} \n\nexport const SignInAuthWithEmailAndPassword = async (email, password) => {\n    if(!email || !password) return;\n    return await signInWithEmailAndPassword(auth, email, password);\n} "],"mappings":"uZAAA;AACA,OAASA,aAAT,KAA8B,cAA9B,CACA,OACIC,OADJ,CAEIC,eAFJ,CAGIC,kBAHJ,CAIIC,8BAJJ,CAKIC,0BALJ,KAMO,eANP,CAOA,OAASC,YAAT,CAAuBC,GAAvB,CAA4BC,MAA5B,CAAoCC,MAApC,KAAkD,oBAAlD,CACA;AACA;AAEA;AACA,GAAMC,CAAAA,cAAc,CAAG,CACrBC,MAAM,CAAE,yCADa,CAErBC,UAAU,CAAE,wCAFS,CAGrBC,SAAS,CAAE,wBAHU,CAIrBC,aAAa,CAAE,oCAJM,CAKrBC,iBAAiB,CAAE,cALE,CAMrBC,KAAK,CAAE,2CANc,CAAvB,CASA;AACA,GAAMC,CAAAA,WAAW,CAAGjB,aAAa,CAACU,cAAD,CAAjC,CAEA,GAAMQ,CAAAA,QAAQ,CAAG,GAAIf,CAAAA,kBAAJ,EAAjB,CAEAe,QAAQ,CAACC,mBAAT,CAA6B,CACzBC,MAAM,CAAE,gBADiB,CAA7B,EAIA,MAAO,IAAMC,CAAAA,IAAI,CAAGpB,OAAO,EAApB,CACP,MAAO,IAAMqB,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,SAAMpB,CAAAA,eAAe,CAACmB,IAAD,CAAOH,QAAP,CAArB,EAA9B,CAEP,MAAO,IAAMK,CAAAA,EAAE,CAAGjB,YAAY,EAAvB,CAEP,MAAO,IAAMkB,CAAAA,0BAA0B,0FAAG,iBAAOC,QAAP,gNAAiBC,qBAAjB,+CAAyC,EAAzC,IAClCD,QADkC,iEAGhCE,UAHgC,CAGnBpB,GAAG,CAACgB,EAAD,CAAK,OAAL,CAAcE,QAAQ,CAACG,GAAvB,CAHgB,uBAIXpB,CAAAA,MAAM,CAACmB,UAAD,CAJK,QAIhCE,YAJgC,kBAOlCA,YAAY,CAACC,MAAb,EAPkC,0BAQ1BC,WAR0B,CAQHN,QARG,CAQ1BM,WAR0B,CAQbC,KARa,CAQHP,QARG,CAQbO,KARa,CAS5BC,SAT4B,CAShB,GAAIC,CAAAA,IAAJ,EATgB,yCAYxBzB,CAAAA,MAAM,CAACkB,UAAD,gBACRI,WAAW,CAAXA,WADQ,CAERC,KAAK,CAALA,KAFQ,CAGRC,SAAS,CAATA,SAHQ,EAILP,qBAJK,EAZkB,2FAmB9BS,OAAO,CAACC,GAAR,CAAY,2BAA6B,YAAMC,OAA/C,EAnB8B,wCAuB/BV,UAvB+B,wEAAH,kBAA1BH,CAAAA,0BAA0B,4CAAhC,CA0BP,MAAO,IAAMc,CAAAA,kCAAkC,2FAAG,kBAAON,KAAP,CAAcO,QAAd,2HAC3C,CAACP,KAAD,EAAU,CAACO,QADgC,2FAEjCnC,CAAAA,8BAA8B,CAACiB,IAAD,CAAOW,KAAP,CAAcO,QAAd,CAFG,iHAAH,kBAAlCD,CAAAA,kCAAkC,kDAAxC,CAKP,MAAO,IAAME,CAAAA,8BAA8B,2FAAG,kBAAOR,KAAP,CAAcO,QAAd,2HACvC,CAACP,KAAD,EAAU,CAACO,QAD4B,2FAE7BlC,CAAAA,0BAA0B,CAACgB,IAAD,CAAOW,KAAP,CAAcO,QAAd,CAFG,iHAAH,kBAA9BC,CAAAA,8BAA8B,kDAApC"},"metadata":{},"sourceType":"module"}