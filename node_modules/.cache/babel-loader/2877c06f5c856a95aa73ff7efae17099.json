{"ast":null,"code":"import _defineProperty from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/matasdamb/Documents/reacting/crwn-clothing/node_modules/@babel/runtime/regenerator/index.js\";import{useState}from\"react\";import FormInput from\"../form-input/form-input.component.jsx\";import Button from\"../button/button.component.jsx\";import{signInWithGooglePopup,createUserDocumentFromAuth,SignInAuthWithEmailAndPassword}from\"../../utils/firebase/firebase.utils.js\";import\"./sign-in-form.styles.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultFormFields={email:'',password:''};var SignInForm=function SignInForm(){var _useState=useState(defaultFormFields),_useState2=_slicedToArray(_useState,2),formFields=_useState2[0],setFormFields=_useState2[1];var email=formFields.email,password=formFields.password;var resetFormFields=function resetFormFields(){setFormFields(defaultFormFields);};var signInWithGoogle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$signInWithGoog,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return signInWithGooglePopup();case 2:_yield$signInWithGoog=_context.sent;user=_yield$signInWithGoog.user;_context.next=6;return createUserDocumentFromAuth(user);case 6:case\"end\":return _context.stop();}}},_callee);}));return function signInWithGoogle(){return _ref.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return SignInAuthWithEmailAndPassword(email,password);case 4:response=_context2.sent;console.log(response);resetFormFields();_context2.next=19;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);_context2.t1=_context2.t0.code;_context2.next=_context2.t1==='auth/wrong-password'?14:_context2.t1==='auth/user-not-found'?16:18;break;case 14:alert('incorrect password for email');return _context2.abrupt(\"break\",19);case 16:alert('user not found');return _context2.abrupt(\"break\",19);case 18:console.log(_context2.t0);case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormFields(_objectSpread(_objectSpread({},formFields),{},_defineProperty({},name,value)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"sign-in-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Already have an account?\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sign in here\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormInput,{label:\"E-mail\",type:\"email\",required:true,onChange:handleChange,name:\"email\",value:email}),/*#__PURE__*/_jsx(FormInput,{label:\"Password\",type:\"password\",required:true,onChange:handleChange,name:\"password\",value:password}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Sign in\"}),/*#__PURE__*/_jsx(Button,{buttonType:\"google\",type:\"button\",onClick:signInWithGoogle,children:\"Google Sign in\"})]})]})]});};export default SignInForm;","map":{"version":3,"names":["useState","FormInput","Button","signInWithGooglePopup","createUserDocumentFromAuth","SignInAuthWithEmailAndPassword","defaultFormFields","email","password","SignInForm","formFields","setFormFields","resetFormFields","signInWithGoogle","user","handleSubmit","event","preventDefault","response","console","log","code","alert","handleChange","target","name","value"],"sources":["/Users/matasdamb/Documents/reacting/crwn-clothing/src/components/sign-in-form/sign-in-form.component.jsx"],"sourcesContent":["import { useState } from \"react\";\n\n\nimport FormInput from \"../form-input/form-input.component.jsx\";\nimport Button from \"../button/button.component.jsx\";\nimport { \n    signInWithGooglePopup, \n    createUserDocumentFromAuth,\n    SignInAuthWithEmailAndPassword\n} from \"../../utils/firebase/firebase.utils.js\";\nimport \"./sign-in-form.styles.scss\";\n\nconst defaultFormFields = {\n    email: '',\n    password: ''\n};\n\nconst SignInForm = () => {\n\n    const [formFields, setFormFields] = useState(defaultFormFields);\n    const { email, password} = formFields;\n\n\n    const resetFormFields = () => {\n        setFormFields(defaultFormFields);\n    }\n\n    const signInWithGoogle = async () => {\n        const {user} = await signInWithGooglePopup();\n        await createUserDocumentFromAuth(user);\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        \n\n        try{\n            const response = await SignInAuthWithEmailAndPassword(email, password);\n            console.log(response);\n            resetFormFields();\n        } catch(error){\n            switch(error.code){\n                case 'auth/wrong-password':\n                    alert('incorrect password for email');\n                    break\n                case 'auth/user-not-found':\n                    alert('user not found');\n                    break\n                default: \n                    console.log(error); \n            }\n            \n        }\n    }\n\n    const handleChange = (event) => {\n        const { name, value } = event.target;\n\n        setFormFields({...formFields, [name]: value});\n    }\n\n    return (\n        <div className=\"sign-in-container\">\n            <h2>Already have an account?</h2>\n            <span>Sign in here</span>\n            <form onSubmit={handleSubmit}>\n                <FormInput label=\"E-mail\" type=\"email\" required onChange={handleChange} name=\"email\" value={email}/>\n\n                <FormInput label=\"Password\" type=\"password\" required onChange={handleChange} name=\"password\" value={password}/>\n                <div className=\"buttons-container\">\n                    <Button type=\"submit\">Sign in</Button>\n                    <Button buttonType=\"google\" type=\"button\" onClick={signInWithGoogle}>Google Sign in</Button>\n                </div>\n            </form>\n        </div>\n    );\n}\n\nexport default SignInForm;\n\n"],"mappings":"uqBAAA,OAASA,QAAT,KAAyB,OAAzB,CAGA,MAAOC,CAAAA,SAAP,KAAsB,wCAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,OACIC,qBADJ,CAEIC,0BAFJ,CAGIC,8BAHJ,KAIO,wCAJP,CAKA,MAAO,4BAAP,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAG,CACtBC,KAAK,CAAE,EADe,CAEtBC,QAAQ,CAAE,EAFY,CAA1B,CAKA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CAErB,cAAoCT,QAAQ,CAACM,iBAAD,CAA5C,wCAAOI,UAAP,eAAmBC,aAAnB,eACA,GAAQJ,CAAAA,KAAR,CAA2BG,UAA3B,CAAQH,KAAR,CAAeC,QAAf,CAA2BE,UAA3B,CAAeF,QAAf,CAGA,GAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1BD,aAAa,CAACL,iBAAD,CAAb,CACH,CAFD,CAIA,GAAMO,CAAAA,gBAAgB,0FAAG,wLACAV,CAAAA,qBAAqB,EADrB,4CACdW,IADc,uBACdA,IADc,uBAEfV,CAAAA,0BAA0B,CAACU,IAAD,CAFX,uDAAH,kBAAhBD,CAAAA,gBAAgB,0CAAtB,CAKA,GAAME,CAAAA,YAAY,2FAAG,kBAAOC,KAAP,mIACjBA,KAAK,CAACC,cAAN,GADiB,wCAKUZ,CAAAA,8BAA8B,CAACE,KAAD,CAAQC,QAAR,CALxC,QAKPU,QALO,gBAMbC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAN,eAAe,GAPF,gGASN,aAAMS,IATA,+BAUJ,qBAVI,mBAaJ,qBAbI,qBAWLC,KAAK,CAAC,8BAAD,CAAL,CAXK,4CAcLA,KAAK,CAAC,gBAAD,CAAL,CAdK,4CAiBLH,OAAO,CAACC,GAAR,eAjBK,sEAAH,kBAAZL,CAAAA,YAAY,6CAAlB,CAuBA,GAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACP,KAAD,CAAW,CAC5B,kBAAwBA,KAAK,CAACQ,MAA9B,CAAQC,IAAR,eAAQA,IAAR,CAAcC,KAAd,eAAcA,KAAd,CAEAf,aAAa,gCAAKD,UAAL,wBAAkBe,IAAlB,CAAyBC,KAAzB,GAAb,CACH,CAJD,CAMA,mBACI,aAAK,SAAS,CAAC,mBAAf,wBACI,gDADJ,cAEI,sCAFJ,cAGI,cAAM,QAAQ,CAAEX,YAAhB,wBACI,KAAC,SAAD,EAAW,KAAK,CAAC,QAAjB,CAA0B,IAAI,CAAC,OAA/B,CAAuC,QAAQ,KAA/C,CAAgD,QAAQ,CAAEQ,YAA1D,CAAwE,IAAI,CAAC,OAA7E,CAAqF,KAAK,CAAEhB,KAA5F,EADJ,cAGI,KAAC,SAAD,EAAW,KAAK,CAAC,UAAjB,CAA4B,IAAI,CAAC,UAAjC,CAA4C,QAAQ,KAApD,CAAqD,QAAQ,CAAEgB,YAA/D,CAA6E,IAAI,CAAC,UAAlF,CAA6F,KAAK,CAAEf,QAApG,EAHJ,cAII,aAAK,SAAS,CAAC,mBAAf,wBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,qBADJ,cAEI,KAAC,MAAD,EAAQ,UAAU,CAAC,QAAnB,CAA4B,IAAI,CAAC,QAAjC,CAA0C,OAAO,CAAEK,gBAAnD,4BAFJ,GAJJ,GAHJ,GADJ,CAeH,CA3DD,CA6DA,cAAeJ,CAAAA,UAAf"},"metadata":{},"sourceType":"module"}